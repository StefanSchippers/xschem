v {xschem version=2.9.8 file_version=1.2}
G {}
K {}
V {}
S {
.probe v(ga,sa) v(gb,sb)
.probe p(q*) p(r*) i(r*) p(xm1) p(xm2) i(d*)}
E {}
T {CURRENT
MEASURE} 1040 -660 0 0 0.2 0.2 {}
T {CURRENT
MEASURE} 1040 -560 0 0 0.2 0.2 {}
T {ANALOG AUDIO AMPLIFIER
N-Channel only power stage} 430 -275 0 0 0.5 0.5 {layer=8 font="Liberation Sans"}
N 1110 -1180 1110 -790 {lab=VPP}
N 180 -500 180 -470 {lab=E9}
N 260 -470 340 -470 {lab=E9}
N 340 -500 340 -470 {lab=E9}
N 1110 -700 1110 -670 {lab=SA}
N 840 -1020 840 -980 {lab=E4}
N 1110 -590 1110 -570 {lab=#net1}
N 1110 -510 1110 -470 {lab=#net2}
N 570 -950 800 -950 {lab=#net3}
N 350 -950 550 -950 {lab=#net3}
N 330 -950 335 -955 {lab=#net3}
N 335 -955 345 -955 {lab=#net3}
N 345 -955 350 -950 {lab=#net3}
N 550 -950 555 -955 {lab=#net3}
N 555 -955 565 -955 {lab=#net3}
N 565 -955 570 -950 {lab=#net3}
N 180 -1020 180 -980 {lab=E1}
N 230 -950 330 -950 {lab=#net3}
N 390 -790 520 -790 {lab=C2}
N 230 -950 230 -900 {lab=#net3}
N 180 -900 230 -900 {lab=#net3}
N 390 -790 390 -740 {lab=C2}
N 340 -740 390 -740 {lab=C2}
N 180 -920 180 -900 {lab=#net3}
N 220 -950 230 -950 {lab=#net3}
N 340 -760 340 -740 {lab=C2}
N 380 -790 390 -790 {lab=C2}
N 180 -1120 180 -1080 {lab=VBOOST}
N 840 -1120 840 -1080 {lab=VBOOST}
N 350 -1120 550 -1120 {lab=VBOOST}
N 330 -1120 335 -1125 {lab=VBOOST}
N 335 -1125 345 -1125 {lab=VBOOST}
N 345 -1125 350 -1120 {lab=VBOOST}
N 550 -1120 555 -1125 {lab=VBOOST}
N 555 -1125 565 -1125 {lab=VBOOST}
N 565 -1125 570 -1120 {lab=VBOOST}
N 180 -1120 330 -1120 {lab=VBOOST}
N 340 -1180 340 -1080 {lab=VPP}
N 560 -1180 560 -1080 {lab=VPP}
N 690 -1120 840 -1120 {lab=VBOOST}
N 340 -1180 560 -1180 {lab=VPP}
N 60 -1180 340 -1180 {lab=VPP}
N 1100 -1120 1105 -1125 {lab=VBOOST}
N 1105 -1125 1115 -1125 {lab=VBOOST}
N 1115 -1125 1120 -1120 {lab=VBOOST}
N 840 -1120 1100 -1120 {lab=VBOOST}
N 560 -1180 1110 -1180 {lab=VPP}
N 900 -440 1070 -440 {lab=GB}
N 560 -460 560 -440 {lab=C8}
N 1200 -1120 1330 -1120 {lab=VBOOST}
N 1200 -900 1200 -870 {lab=#net4}
N 1110 -1180 1330 -1180 {lab=VPP}
N 560 -580 560 -520 {lab=E8}
N 560 -760 560 -640 {lab=C6}
N 840 -780 840 -760 {lab=GA}
N 690 -810 690 -790 {lab=B1}
N 690 -810 800 -810 {lab=B1}
N 690 -1120 690 -880 {lab=VBOOST}
N 570 -1120 690 -1120 {lab=VBOOST}
N 690 -820 690 -810 {lab=B1}
N 260 -470 260 -460 {lab=E9}
N 180 -70 260 -70 {lab=VNN}
N 50 -210 220 -210 {lab=B3}
N 260 -180 260 -130 {lab=E3}
N 180 -150 180 -70 {lab=VNN}
N 50 -150 50 -70 {lab=VNN}
N 50 -70 180 -70 {lab=VNN}
N 690 -600 1110 -600 {lab=#net1}
N 180 -470 260 -470 {lab=E9}
N 1110 -610 1110 -600 {lab=#net1}
N 1030 -380 1110 -380 {lab=SB}
N 1030 -700 1110 -700 {lab=SA}
N 1200 -1120 1200 -960 {lab=VBOOST}
N 1110 -410 1110 -380 {lab=SB}
N 1110 -730 1110 -700 {lab=SA}
N 1120 -1120 1200 -1120 {lab=VBOOST}
N 840 -760 1070 -760 {lab=GA}
N 340 -740 340 -690 {lab=C2}
N 340 -630 340 -560 {lab=C9}
N 220 -630 340 -630 {lab=C9}
N 180 -600 180 -560 {lab=C5}
N 1110 -320 1110 -280 {lab=VNN}
N 1330 -590 1390 -590 {lab=OUT}
N 1110 -590 1200 -590 {lab=#net1}
N 1110 -600 1110 -590 {lab=#net1}
N 340 -860 340 -820 {lab=#net5}
N 560 -860 560 -820 {lab=#net6}
N 560 -1020 560 -920 {lab=E6}
N 340 -1020 340 -920 {lab=E2}
N 260 -280 260 -240 {lab=C3}
N 800 -440 840 -440 {lab=#net7}
N 560 -440 740 -440 {lab=C8}
N 690 -650 690 -600 {lab=#net1}
N 690 -730 690 -710 {lab=#net8}
N 180 -840 180 -660 {lab=C7}
N 840 -860 840 -840 {lab=E11}
N 1200 -810 1200 -590 {lab=#net1}
N 930 -760 930 -750 {lab=GA}
N 930 -710 930 -700 {lab=SA}
N 930 -700 1030 -700 {lab=SA}
N 930 -440 930 -430 {lab=GB}
N 930 -390 930 -380 {lab=SB}
N 930 -380 1030 -380 {lab=SB}
N 1200 -590 1270 -590 {lab=#net1}
C {ipin.sym} 530 -160 0 0 {name=p0 lab=PLUS}
C {ipin.sym} 530 -120 0 0 {name=p2 lab=VPP}
C {ipin.sym} 530 -100 0 0 {name=p3 lab=VNN}
C {nmos3.sym} 1090 -440 0 0 {name=xm2 model=irf540 m=1
program=evince
url="https://www.vishay.com/docs/91021/91021.pdf"
 net_name=true}
C {res.sym} 1030 -410 0 1 {name=R7 m=1 value=190 net_name=true}
C {nmos3.sym} 1090 -760 0 0 {name=xm1 model=irf540 m=1
program=evince
url="https://www.vishay.com/docs/91021/91021.pdf" net_name=true}
C {res.sym} 1030 -730 0 1 {name=R0 m=1 value=190 net_name=true}
C {lab_pin.sym} 1390 -590 0 1 {name=p14 lab=OUT}
C {lab_pin.sym} 1110 -280 0 0 {name=p18 lab=VNN}
C {lab_wire.sym} 990 -440 0 0 {name=l8 lab=GB}
C {res.sym} 340 -1050 0 1 {name=R2 m=1 value=50 net_name=true}
C {res.sym} 180 -1050 0 1 {name=R3 m=1 value=50 net_name=true}
C {lab_pin.sym} 340 -1080 0 0 {name=p10 lab=VPP}
C {npn.sym} 160 -530 0 0 {name=Q5 model=q2n2222 area=1 net_name=true}
C {pnp.sym} 820 -950 0 0 {name=Q4 model=q2n2907p area=1 net_name=true}
C {res.sym} 840 -1050 0 1 {name=R9 m=1 value=50 net_name=true}
C {pnp.sym} 540 -790 0 0 {name=Q6 model=q2n2907p area=1 net_name=true}
C {res.sym} 560 -1050 0 1 {name=R4 m=1 value=50 net_name=true}
C {lab_pin.sym} 180 -580 0 0 {name=p15 lab=C5}
C {lab_pin.sym} 340 -580 0 1 {name=p16 lab=C9}
C {lab_pin.sym} 180 -1000 0 0 {name=p17 lab=E1}
C {lab_pin.sym} 560 -1080 0 0 {name=p25 lab=VPP}
C {lab_pin.sym} 340 -970 0 1 {name=p23 lab=E2}
C {lab_pin.sym} 560 -970 0 1 {name=p28 lab=E6}
C {lab_pin.sym} 840 -1000 0 0 {name=p29 lab=E4}
C {lab_pin.sym} 180 -1120 0 0 {name=p34 lab=VBOOST}
C {ammeter.sym} 1110 -540 0 0 {name=vd current=0.2093 net_name=true}
C {ammeter.sym} 1110 -640 0 0 {name=vu current=0.2336 net_name=true}
C {lab_pin.sym} 60 -1180 0 0 {name=p27 lab=VPP}
C {pnp.sym} 200 -950 0 1 {name=Q1 model=q2n2907p area=1 net_name=true}
C {pnp.sym} 360 -790 0 1 {name=Q2 model=q2n2907p area=1 net_name=true}
C {lab_pin.sym} 140 -530 0 0 {name=p6 lab=PLUS}
C {lab_pin.sym} 380 -530 0 1 {name=p24 lab=MINUS}
C {npn.sym} 360 -530 0 1 {name=Q9 model=q2n2222 area=1 net_name=true}
C {lab_pin.sym} 560 -670 0 0 {name=p9 lab=C6}
C {code.sym} 1040 -180 0 0 {name=STIMULI
only_toplevel=true
value=".option PARHIER=LOCAL RUNLVL=6 post MODMONTE=1 warn maxwarn=6000
.option sampling_method = SRS ingold=1
.option method=gear
.temp 30



vvss vss 0 dc 0 
vvpp vpp 0 dc 50
vvnn vnn 0 dc -50

rfb1 vpp minus 100k
rfb2 out minus 100k
rfb3 minus vdc '100k/43'


vvdc vdc 0 dc 21.3
eref vref 0 plus vdc 45

vplus plus vdc dc 0

evboost vboost 0 vol='v(out)>=40 ? v(out)+10 : 50'
rload out 0 4

** models are generally not free: you must download
** SPICE models for active devices and put them  into the below 
** referenced file in simulation directory.
.include \\"models_poweramp.txt\\"
.dc vplus '-1.5' '1.5' 0.1
.save all
.op
*.probe dc v(plus,vdc)
"}
C {lab_wire.sym} 990 -760 0 0 {name=l1 lab=GA}
C {res.sym} 870 -440 1 1 {name=R11 m=1 value=1300 net_name=true}
C {pnp.sym} 540 -490 0 0 {name=Q8 model=q2n2907p area=1 net_name=true}
C {capa.sym} 1200 -930 0 0 {name=C12 m=1 value="40u" net_name=true}
C {diode.sym} 1200 -1150 0 0 {name=D0 model=d1n4148 area=1
url="http://pdf.datasheetcatalog.com/datasheet/bytes/1N5406.pdf" net_name=true}
C {res.sym} 1200 -840 0 1 {name=R18 m=1 value=200 net_name=true}
C {zener.sym} 1330 -1150 0 0 {name=D1 model=d1n758 area=1
url="http://www.futurlec.com/Datasheet/Diodes/1N746-1N759.pdf" net_name=true}
C {res.sym} 690 -760 0 1 {name=R14 m=1 value=4k net_name=true}
C {pnp.sym} 820 -810 0 0 {name=Q11 model=q2n2907p area=1 net_name=true}
C {res.sym} 690 -850 0 1 {name=R15 m=1 value=4k net_name=true}
C {res.sym} 260 -430 0 1 {name=R5 m=1 value=600 net_name=true}
C {res.sym} 260 -370 0 1 {name=R6 m=1 value=700 net_name=true}
C {zener.sym} 180 -180 2 0 {name=D2 model=d1n755 area=1
url="http://www.futurlec.com/Datasheet/Diodes/1N746-1N759.pdf"
 net_name=true}
C {npn.sym} 240 -210 0 0 {name=Q3 model=q2n2222 area=1 net_name=true}
C {res.sym} 180 -240 0 1 {name=R1 m=1 value=10k net_name=true}
C {lab_pin.sym} 180 -270 0 0 {name=p7 lab=VSS}
C {res.sym} 260 -100 0 1 {name=R10 m=1 value=170 net_name=true}
C {lab_pin.sym} 50 -70 0 0 {name=p11 lab=VNN}
C {capa.sym} 50 -180 0 0 {name=C3 m=1 value=100n net_name=true}
C {res.sym} 560 -610 0 1 {name=R12 m=1 value=1300 net_name=true}
C {lab_pin.sym} 690 -800 0 0 {name=p12 lab=B1}
C {lab_pin.sym} 340 -470 0 1 {name=p13 lab=E9}
C {lab_pin.sym} 560 -440 0 0 {name=p19 lab=C8}
C {lab_pin.sym} 560 -560 0 1 {name=p20 lab=E8}
C {lab_pin.sym} 840 -850 0 0 {name=p21 lab=E11}
C {lab_pin.sym} 260 -160 0 1 {name=p22 lab=E3}
C {lab_pin.sym} 260 -270 0 0 {name=p26 lab=C3}
C {lab_pin.sym} 50 -210 0 0 {name=p30 lab=B3}
C {lab_pin.sym} 520 -490 0 0 {name=p33 lab=VSS}
C {res.sym} 340 -660 0 1 {name=R13 m=1 value=300 net_name=true}
C {npn.sym} 200 -630 0 1 {name=Q7 model=q2n2222 area=1 net_name=true}
C {lab_pin.sym} 180 -690 0 0 {name=p8 lab=C7}
C {lab_pin.sym} 340 -710 0 1 {name=p31 lab=C2}
C {title.sym} 160 -30 0 0 {name=l2 author="Stefan Schippers"}
C {lab_pin.sym} 930 -700 0 0 {name=p32 lab=SA}
C {ammeter.sym} 1110 -350 0 0 {name=v0 current=0.2288 net_name=true}
C {lab_pin.sym} 930 -380 0 0 {name=p35 lab=SB}
C {ammeter.sym} 560 -890 0 0 {name=v1 current=0.01956 net_name=true}
C {ammeter.sym} 340 -890 0 0 {name=v2 current=0.01947 net_name=true}
C {ammeter.sym} 260 -310 0 0 {name=v3 current=0.03924 net_name=true}
C {ammeter.sym} 770 -440 3 0 {name=v4 current=0.01942 net_name=true}
C {ammeter.sym} 690 -680 0 0 {name=v5 current=0.006271 net_name=true}
C {ammeter.sym} 180 -870 0 1 {name=v6 current=0.01955 net_name=true}
C {ammeter.sym} 840 -890 0 0 {name=v7 current=0.0195 net_name=true}
C {spice_probe.sym} 1010 -440 0 0 {name=p36 analysis=tran voltage=-46.31}
C {spice_probe_vdiff.sym} 930 -410 0 0 {name=p37 analysis=tran voltage=3.689}
C {spice_probe_vdiff.sym} 930 -730 0 0 {name=p38 analysis=tran voltage=3.691}
C {spice_probe.sym} 1010 -760 0 0 {name=p39 analysis=tran voltage=3.814}
C {spice_probe.sym} 1220 -590 0 0 {name=p40 analysis=tran voltage=0.1231}
C {spice_probe.sym} 380 -530 0 0 {name=p41 analysis=tran voltage=21.3}
C {spice_probe.sym} 140 -530 0 1 {name=p42 analysis=tran voltage=21.3}
C {spice_probe.sym} 250 -470 0 1 {name=p43 analysis=tran voltage=20.61}
C {spice_probe.sym} 440 -790 0 0 {name=p44 analysis=tran voltage=48.22}
C {spice_probe.sym} 280 -950 0 0 {name=p45 analysis=tran voltage=48.22}
C {spice_probe.sym} 730 -810 0 0 {name=p46 analysis=tran voltage=25.21}
C {spice_probe.sym} 610 -1180 0 0 {name=p47 analysis=tran voltage=50}
C {spice_probe.sym} 760 -1120 0 0 {name=p48 analysis=tran voltage=50}
C {ammeter.sym} 1300 -590 3 0 {name=v8 current=0.03055 net_name=true}
C {spice_probe.sym} 1110 -280 0 0 {name=p49 analysis=tran voltage=-50}
C {spice_probe.sym} 280 -630 0 1 {name=p50 analysis=tran voltage=42.36}
C {spice_probe.sym} 340 -820 0 1 {name=p51 analysis=tran voltage=49.03}
C {spice_probe.sym} 120 -210 0 1 {name=p52 analysis=tran voltage=-42.58}
C {spice_probe.sym} 130 -70 0 1 {name=p53 analysis=tran voltage=-50}
C {opin.sym} 600 -130 0 0 {name=p5 lab=OUT}
C {ipin.sym} 530 -180 0 0 {name=p1 lab=MINUS}
C {ipin.sym} 530 -140 0 0 {name=p4 lab=VSS}
